import {readMessage} from '../../src/ln/messages/parser'
import {getRandomBytes, setStaticSeed, wrapHex, wrapPubKey} from '../../src/ln/helper'
import Long from 'long'
import {createChannel} from '../../src/ln/channel/channel'
import {options} from './options'

const getState = (peer, options, value) => {
  setStaticSeed()
  getRandomBytes(32)

  let channel = createChannel(peer, options, value)

  let state = {}
  state.ln = {}
  state.ln.channel = {}
  state.ln.channel[channel.channelId.toString('hex')] = channel

  return state
}

const peer = wrapPubKey(wrapHex('030fd5c1bd67fe4627ac5e046129790fadd83ba1e050ce591316891980a97ebf0b'))
const state = getState(peer, options, 100000)
const channelId = Object.keys(state.ln.channel)[0]
const channel = state.ln.channel[channelId]

export const getTestState = () => ({
  state: getState(peer, options, 100000),
  channelId,
  channel,
  peer
})

export const OPEN_CHANNEL = readMessage(wrapHex('002043497fd7f826957108f4a30fd9cec3aeba79972084e90ead01ea3309000000003a3f6d4244756134534d4344573e3d73785635233937305c212159373953285400000000000186a00000000000000000000000000000022200000000000186a00000000000000000000000000000000000002710003c006403dda5f77c6d63d98892b670967e9be341e6c473e1fc61e1a6b7837994a570765803bcd7fd09aa43c61a77c2741ee00eb2017311e4105a5c71cce09c868f5726273e02da9a98bc2f1c58f63e8b7a6a3bdde8a117c99d3cc054c0f3fb6e575657d1da9f0288a6c59c891e6eaab164f94a02053c3c8acf073f53593efd18401d6d6b814eac02dca9a623da1ba035e567b2fc81bd663c2c890f2a4e668b893576e5108f9b869d0378b4a127915b9d972c12620dfffcdcac84ee70c4c257429ba48de4369c233d810000230000000000000000000000000000000000000000000000000000000000000000000000'))
export const ACCEPT_CHANNEL = readMessage(wrapHex('00213a3f6d4244756134534d4344573e3d73785635233937305c2121593739532854000000000000021e000000174876e80000000000000003e800000000000f4240000000000090001e03500ac56b0e074cea97c96f859d914bc3b0b7e1161380d90961a400549340481903d95a7e3cfe2d3feda668e4d5352cfa6e0f2c49f32a79dd2cca203e7d7ab78ed2033f86fca20df004d1aad3da13bdd128154b2de26de402039775fd04577bfe8785020602a05b888b5b521fd6c61007489bea2364583a8980d85892c792782fac55dd025fd9d71f45bca89e918dec9f8fc4fa6fa5319bf7b6360a101eec308af53d9bb603fdba68fada7b9f4ae40e853a54072f9babd5164a04b0ddd11836d628cbd45371'))
export const FUNDING_CREATED = readMessage(wrapHex('00223a3f6d4244756134534d4344573e3d73785635233937305c2121593739532854eb40f508654f7bb7c7c1a39fc1cea6d324dd7e2f7d34c95b7d26b4e8069bb49e0000ddd5e20fc9bc25edbb4055bb214dc0200ed96491df1bced7676450427be70dca6b493c7d63ebb61239d0717bebf8d6258754184de2aa48eae7d94eddd152f5fc'))
export const FUNDING_SIGNED = readMessage(wrapHex('0023eb40f508654f7bb7c7c1a39fc1cea6d324dd7e2f7d34c95b7d26b4e8069bb49e962724b495d415e8b8e2fabc2b7d7580c12f23603f0b1eb0c08cbb721df980ce3fc45506b5883107515f417a47b6995532d0c0c16585861cd409d14d19167ecc'))
export const FUNDING_LOCKED = readMessage(wrapHex('0024eb40f508654f7bb7c7c1a39fc1cea6d324dd7e2f7d34c95b7d26b4e8069bb49e03a62f8042519abd04b924a44ea6cd8ff0a1059ebc7a6c8490c81019cec6715f8d'))

export const FUNDING_TX = wrapHex('0200000001436730f56272e2cac7a4673137cde731beeb0a20032d31fab89e9ab7b47086e6010000006a47304402207edf3ad347fe2d9f22505e7848065e011ebabecf5fedde4f7517a00e9471832d02206d4f80ce7b4c910fbcdd7d79ed7a5ac6004f97ed38743f646c1e3f707f4b57e001210279ece5cc73ff2befd13dd777a22d5c6559e178b870f4ce56bc74a9f29177f33affffffff02a086010000000000220020617be59fb57d3fa45815cc8f73384b6dc49e78462d829aa3c52e389e8118f234c2209807000000001976a9147292f12e751d61f05924881927739a47215d20a288ac00000000')
